ant.properties['version'] = version
ant.properties['build.timestamp'] = buildTimeStamp

if (versionQualifier)
{
	ant.properties['context.qualifier'] = versionQualifier
}
else
{
	ant.properties['context.qualifier'] = buildTimeStamp
}

ant.importBuild 'build.xml'

dependencies {
	compile project(':mango-libs')
	compile project(':mango-dsl')
	compile project(':mango-dsl-ui')
}

task zipUpdateSite(dependsOn: buildAll, type: Zip) {
	from buildDir.name + '/updatesite'
}

compileJava.dependsOn buildAll, zipUpdateSite

artifacts {
	archives (zipUpdateSite) {
		name "updatesite"
	}
}

buildAll.dependsOn(":mango-dsl-ui:build")
buildAll.dependsOn(":mango-libs:build")
buildAll.dependsOn(":mango-dsl:build")
